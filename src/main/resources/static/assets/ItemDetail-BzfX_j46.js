import{u as $,a as F,r as p,b as f,j as e,S as V,A as y,c as l,B as h,T as z,R as I,C as A,D as o,aT as L,aQ as N,M as v,a$ as C,I as O,s as b}from"./index-afCWbyQR.js";import{c as H,e as Q}from"./itemService-CvxgOJSs.js";import{R as U,D as q}from"./ArrowLeftOutlined-BRSBGch-.js";const{Title:G,Text:r}=z,X=()=>{var j,g;const{id:i}=$(),R=F(),[S,d]=p.useState(!1),[n,c]=p.useState({}),[T,x]=p.useState(!1),{data:t,loading:k,error:m,run:u}=f(H,{manual:!i,defaultParams:[i],onError:s=>{console.error("Item detail error:",s)}}),{run:w,loading:B}=f(Q,{manual:!0,onSuccess:()=>{b.success("价格更新成功"),d(!1),u(i)}}),D=()=>{R("/items")},E=()=>{t&&(c({name:t.name,price:t.price}),x(!0))},M=s=>{i&&w(i,s)},P=()=>{b.success("物品信息更新成功"),x(!1),u(i)};return k?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e.jsx(V,{size:"large"})}):m?e.jsx(y,{message:m,type:"error",showIcon:!0,style:{margin:"24px"}}):t?e.jsxs("div",{style:{padding:"0 0 24px 0"},children:[e.jsxs("div",{style:{marginBottom:24,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(l,{children:[e.jsx(h,{type:"text",icon:e.jsx(U,{}),onClick:D,children:"返回物品列表"}),e.jsx(q,{type:"vertical"}),e.jsx(G,{level:2,style:{margin:0},children:"物品详情"})]}),e.jsx(l,{children:e.jsx(h,{type:"primary",icon:e.jsx(I,{}),onClick:E,children:"编辑物品"})})]}),e.jsx(A,{title:"基本信息",style:{marginBottom:24},children:e.jsxs(o,{column:2,bordered:!0,children:[e.jsx(o.Item,{label:"物品ID",span:2,children:e.jsx(r,{code:!0,children:t.id})}),e.jsx(o.Item,{label:e.jsxs("span",{children:[e.jsx(L,{style:{marginRight:4}}),"名称"]}),children:e.jsx(r,{strong:!0,children:t.name||"未设置"})}),e.jsx(o.Item,{label:e.jsxs("span",{children:[e.jsx(N,{style:{marginRight:4}}),"价格"]}),children:e.jsxs(l,{children:[e.jsxs(r,{strong:!0,style:{color:"#52c41a",fontSize:"16px"},children:["¥",((j=t.price)==null?void 0:j.toFixed(2))||"0.00"]}),e.jsx(h,{type:"link",size:"small",icon:e.jsx(I,{}),onClick:()=>d(!0),children:"修改价格"})]})})]})}),e.jsx(v,{title:"更新价格",open:S,onOk:()=>{n.price!==void 0&&M(n.price)},onCancel:()=>d(!1),confirmLoading:B,okText:"确认",cancelText:"取消",children:e.jsxs(l,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(r,{children:["当前价格: ",e.jsxs(r,{strong:!0,style:{color:"#52c41a"},children:["¥",(g=t.price)==null?void 0:g.toFixed(2)]})]}),e.jsx(C,{style:{width:"100%"},placeholder:"请输入新价格",min:0,step:.01,value:n.price,onChange:s=>c(a=>({...a,price:s})),formatter:s=>`¥ ${s}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:s=>s.replace(/\¥\s?|(,*)/g,"")})]})}),e.jsx(v,{title:"编辑物品",open:T,onOk:P,onCancel:()=>x(!1),okText:"保存",cancelText:"取消",width:600,children:e.jsxs(l,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{children:[e.jsx(r,{strong:!0,children:"名称: "}),e.jsx(O,{value:n.name,onChange:s=>c(a=>({...a,name:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(r,{strong:!0,children:"价格: "}),e.jsx(C,{style:{width:"100%"},value:n.price,onChange:s=>c(a=>({...a,price:s})),min:0,step:.01,formatter:s=>`¥ ${s}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:s=>s.replace(/¥\s?|(,*)/g,"")})]})]})})]}):e.jsx(y,{message:"物品不存在",type:"warning",showIcon:!0,style:{margin:"24px"}})};export{X as default};
