import{r as l,ad as S,a as q,j as t,ao as v,T as O,i as L,B as f,k as M,C,e as I,I as N,h as z,n as V,am as _}from"./index-CTY_xFTU.js";import{d as A}from"./dayjs.min-BK1LSoZx.js";import{w as x}from"./withdrawalService-ArqYn4c_.js";import{R as B}from"./ReloadOutlined-uU6dfYDP.js";import{D as Y}from"./index-DDTP6W3x.js";var b={};Object.defineProperty(b,"__esModule",{value:!0});var W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},G=b.default=W;function w(){return w=Object.assign?Object.assign.bind():function(a){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])}return a},w.apply(this,arguments)}const J=(a,r)=>l.createElement(S,w({},a,{ref:r,icon:G})),K=l.forwardRef(J);var R={};Object.defineProperty(R,"__esModule",{value:!0});var Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},U=R.default=Q;function j(){return j=Object.assign?Object.assign.bind():function(a){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])}return a},j.apply(this,arguments)}const X=(a,r)=>l.createElement(S,j({},a,{ref:r,icon:U})),Z=l.forwardRef(X),{Title:ee}=O,{Option:o}=z,{RangePicker:le}=Y,{Search:m}=N,ie=()=>{const a=q(),[r,s]=l.useState(!1),[i,T]=l.useState([]),[d,P]=l.useState({current:1,pageSize:10,total:0}),[h,y]=l.useState({}),[g,k]=l.useState(!1),c=async(e={})=>{s(!0);try{const n={page:e.page||d.current,size:e.size||d.pageSize,...h,...e},p=await x.getWithdrawalRequests(n);T(p.records),P({current:p.current,pageSize:p.size,total:p.total})}catch{_.error("获取提现请求列表失败")}finally{s(!1)}};l.useEffect(()=>{c()},[]);const E=e=>{c({page:e.current,size:e.pageSize})},u=e=>{const n={...h,...e};y(n),c({page:1,...n})},H=()=>{y({}),c({page:1,size:d.pageSize})},$=e=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(e),D=e=>A(e).format("YYYY-MM-DD HH:mm:ss"),F=[{title:"ID",dataIndex:"id",key:"id",width:50},{title:"请求编号",dataIndex:"requestId",key:"requestId",width:100,ellipsis:{showTitle:!1},render:e=>t.jsx(v,{placement:"topLeft",title:e,children:e})},{title:"用户名",dataIndex:"username",key:"username",width:90,ellipsis:!0},{title:"提现金额",dataIndex:"amount",key:"amount",width:80,align:"right",render:e=>t.jsx(O.Text,{strong:!0,style:{color:"#52c41a"},children:$(e)})},{title:"状态",dataIndex:"status",key:"status",width:100,render:e=>t.jsx(L,{color:x.getStatusColor(e),children:x.getStatusText(e)})},{title:"第三方订单号",dataIndex:"thirdPartyOrderNo",key:"thirdPartyOrderNo",width:200,ellipsis:{showTitle:!1},render:e=>t.jsx(v,{placement:"topLeft",title:e,children:e||"-"})},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",width:180,render:e=>D(e),sorter:!0,sortOrder:h.orderBy==="created_at"&&!h.isAsc?"descend":"ascend"},{title:"操作",key:"action",width:100,fixed:"right",render:(e,n)=>t.jsx(f,{type:"link",size:"small",icon:t.jsx(M,{}),onClick:()=>a(`/withdrawal-requests/${n.id}`),children:"查看"})}];return t.jsx("div",{style:{padding:"24px"},children:t.jsxs(C,{children:[t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(ee,{level:4,children:"提现请求管理"}),t.jsxs(I,{children:[t.jsx(f,{icon:t.jsx(Z,{}),onClick:()=>k(!g),type:g?"primary":"default",children:"筛选"}),t.jsx(f,{icon:t.jsx(B,{}),onClick:()=>c(),loading:r,children:"刷新"})]})]}),g&&t.jsx(C,{size:"small",style:{marginTop:"16px",backgroundColor:"#fafafa"},children:t.jsxs(I,{wrap:!0,children:[t.jsx(m,{placeholder:"搜索请求编号",style:{width:200},onSearch:e=>u({requestId:e}),allowClear:!0}),t.jsx(m,{placeholder:"搜索用户ID",style:{width:200},onSearch:e=>u({userId:e}),allowClear:!0}),t.jsxs(z,{placeholder:"选择状态",style:{width:150},allowClear:!0,onChange:e=>u({status:e||void 0}),children:[t.jsx(o,{value:"PENDING",children:"待处理"}),t.jsx(o,{value:"APPROVED",children:"已批准"}),t.jsx(o,{value:"PROCESSING",children:"处理中"}),t.jsx(o,{value:"COMPLETED",children:"已完成"}),t.jsx(o,{value:"REJECTED",children:"已拒绝"}),t.jsx(o,{value:"FAILED",children:"失败"})]}),t.jsx(m,{placeholder:"搜索第三方订单号",style:{width:200},onSearch:e=>u({thirdPartyOrderNo:e}),allowClear:!0}),t.jsx(f,{icon:t.jsx(K,{}),onClick:H,children:"清除筛选"})]})})]}),t.jsx(V,{columns:F,dataSource:i,rowKey:"id",loading:r,pagination:{...d,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,n)=>`第 ${n[0]}-${n[1]} 条，共 ${e} 条`},onChange:E,scroll:{x:1200},size:"middle"})]})})};export{ie as default};
