import{r as i,ad as C,u as T,a as z,j as e,S as $,C as d,d as v,e as h,B as E,T as A,b5 as M,b6 as R,D as s,i as O,am as f,b7 as L,b8 as w,l as _}from"./index-BtDz0sTi.js";import{d as q}from"./dayjs.min-B3sLKr0C.js";import{w as u}from"./withdrawalService-DCommvxe.js";import{R as B}from"./ArrowLeftOutlined-V4LInCdL.js";import{R as Y}from"./ReloadOutlined-BHq4VUCG.js";import{D as G}from"./index-Dxp7kd2g.js";var D={};Object.defineProperty(D,"__esModule",{value:!0});var W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},F=D.default=W;function j(){return j=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(r[l]=t[l])}return r},j.apply(this,arguments)}const V=(r,a)=>i.createElement(C,j({},r,{ref:a,icon:F})),H=i.forwardRef(V);var S={};Object.defineProperty(S,"__esModule",{value:!0});var J={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},K=S.default=J;function p(){return p=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(r[l]=t[l])}return r},p.apply(this,arguments)}const Q=(r,a)=>i.createElement(C,p({},r,{ref:a,icon:K})),U=i.forwardRef(Q),{Title:X,Text:o}=A,ae=()=>{const{id:r}=T(),a=z(),[t,l]=i.useState(null),[g,y]=i.useState(!0),I=async()=>{var n,x;if(r){y(!0);try{const c=await u.getWithdrawalRequestDetail(Number(r));l(c)}catch(c){((n=c.response)==null?void 0:n.status)===404?f.error("提现请求不存在"):((x=c.response)==null?void 0:x.status)===403?f.error("无权限查看此提现请求"):f.error("获取提现请求详情失败")}finally{y(!1)}}};i.useEffect(()=>{I()},[r]);const P=n=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(n),m=n=>q(n).format("YYYY-MM-DD HH:mm:ss"),b=n=>{switch(n){case"PENDING":return e.jsx(_,{style:{color:"#faad14"}});case"APPROVED":return e.jsx(w,{style:{color:"#1890ff"}});case"PROCESSING":return e.jsx(U,{style:{color:"#1890ff"}});case"COMPLETED":return e.jsx(w,{style:{color:"#52c41a"}});case"REJECTED":case"FAILED":return e.jsx(L,{style:{color:"#ff4d4f"}});default:return e.jsx(H,{style:{color:"#d9d9d9"}})}},N=n=>{const c={PENDING:{type:"warning",message:"提现请求正在等待处理"},APPROVED:{type:"info",message:"提现请求已批准，正在准备转账"},PROCESSING:{type:"info",message:"提现正在处理中，请耐心等待"},COMPLETED:{type:"success",message:"提现已成功完成"},REJECTED:{type:"error",message:"提现请求已被拒绝"},FAILED:{type:"error",message:"提现处理失败"}}[n]||{type:"info",message:"未知状态"};return e.jsx(v,{message:c.message,type:c.type,showIcon:!0,style:{marginBottom:"24px"}})};return g?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px"},children:e.jsx($,{size:"large"})}):t?e.jsx("div",{style:{padding:"24px"},children:e.jsxs(d,{children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(h,{children:[e.jsx(E,{icon:e.jsx(B,{}),onClick:()=>a("/withdrawal-requests"),children:"返回列表"}),e.jsx(E,{icon:e.jsx(Y,{}),onClick:I,loading:g,children:"刷新"})]})}),e.jsx(X,{level:4,children:"提现请求详情"}),e.jsx(G,{}),N(t.status),e.jsxs(M,{gutter:[24,24],children:[e.jsx(R,{xs:24,lg:16,children:e.jsx(d,{title:"基本信息",size:"small",children:e.jsxs(s,{column:2,bordered:!0,children:[e.jsx(s.Item,{label:"请求ID",children:t.id}),e.jsx(s.Item,{label:"请求编号",children:e.jsx(o,{code:!0,children:t.requestId})}),e.jsx(s.Item,{label:"用户名",children:t.username}),e.jsx(s.Item,{label:"OpenID",children:e.jsx(o,{code:!0,style:{fontSize:"12px"},children:t.openId})}),e.jsx(s.Item,{label:"提现金额",children:e.jsx(o,{strong:!0,style:{color:"#52c41a",fontSize:"16px"},children:P(t.amount)})}),e.jsx(s.Item,{label:"状态",children:e.jsxs(h,{children:[b(t.status),e.jsx(O,{color:u.getStatusColor(t.status),children:u.getStatusText(t.status)})]})}),e.jsx(s.Item,{label:"第三方订单号",children:t.thirdPartyOrderNo?e.jsx(o,{code:!0,children:t.thirdPartyOrderNo}):e.jsx(o,{type:"secondary",children:"-"})}),e.jsx(s.Item,{label:"错误原因",children:t.errorReason?e.jsx(o,{type:"danger",children:t.errorReason}):e.jsx(o,{type:"secondary",children:"-"})})]})})}),e.jsx(R,{xs:24,lg:8,children:e.jsx(d,{title:"时间信息",size:"small",children:e.jsxs(s,{column:1,bordered:!0,children:[e.jsx(s.Item,{label:"创建时间",children:m(t.createdAt)}),e.jsx(s.Item,{label:"更新时间",children:m(t.updatedAt)}),e.jsx(s.Item,{label:"完成时间",children:t.completedAt?m(t.completedAt):e.jsx(o,{type:"secondary",children:"未完成"})})]})})})]}),e.jsx(d,{title:"状态说明",size:"small",style:{marginTop:"24px"},children:e.jsx(s,{column:1,bordered:!0,children:e.jsx(s.Item,{label:"当前状态",children:e.jsxs(h,{children:[b(t.status),e.jsx(O,{color:u.getStatusColor(t.status),children:u.getStatusText(t.status)}),t.statusDescription&&e.jsxs(o,{type:"secondary",children:["(",t.statusDescription,")"]})]})})})})]})}):e.jsx("div",{style:{padding:"24px"},children:e.jsx(d,{children:e.jsx(v,{message:"提现请求不存在或无权限访问",type:"error",showIcon:!0})})})};export{ae as default};
