import{r as n,a7 as S,a as q,j as t,al as v,T as O,g as L,B as f,h as M,C,c as I,I as N,f as z,aa as V,s as _}from"./index-Lw0J2Zlk.js";import{d as A}from"./dayjs.min-vM_9yUT-.js";import{w as x,R as B}from"./withdrawalService-BI6gWgPG.js";import{D as Y}from"./index-BhdJwoCX.js";var b={};Object.defineProperty(b,"__esModule",{value:!0});var W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},G=b.default=W;function w(){return w=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},w.apply(this,arguments)}const J=(r,a)=>n.createElement(S,w({},r,{ref:a,icon:G})),K=n.forwardRef(J);var R={};Object.defineProperty(R,"__esModule",{value:!0});var Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},U=R.default=Q;function j(){return j=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},j.apply(this,arguments)}const X=(r,a)=>n.createElement(S,j({},r,{ref:a,icon:U})),Z=n.forwardRef(X),{Title:ee}=O,{Option:c}=z,{RangePicker:le}=Y,{Search:m}=N,ne=()=>{const r=q(),[a,s]=n.useState(!1),[i,T]=n.useState([]),[d,P]=n.useState({current:1,pageSize:10,total:0}),[h,y]=n.useState({}),[g,E]=n.useState(!1),o=async(e={})=>{s(!0);try{const l={page:e.page||d.current,size:e.size||d.pageSize,...h,...e},p=await x.getWithdrawalRequests(l);T(p.records),P({current:p.current,pageSize:p.size,total:p.total})}catch{_.error("获取提现请求列表失败")}finally{s(!1)}};n.useEffect(()=>{o()},[]);const k=e=>{o({page:e.current,size:e.pageSize})},u=e=>{const l={...h,...e};y(l),o({page:1,...l})},H=()=>{y({}),o({page:1,size:d.pageSize})},$=e=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(e),D=e=>A(e).format("YYYY-MM-DD HH:mm:ss"),F=[{title:"ID",dataIndex:"id",key:"id",width:50},{title:"请求编号",dataIndex:"requestId",key:"requestId",width:100,ellipsis:{showTitle:!1},render:e=>t.jsx(v,{placement:"topLeft",title:e,children:e})},{title:"用户名",dataIndex:"username",key:"username",width:90,ellipsis:!0},{title:"提现金额",dataIndex:"amount",key:"amount",width:80,align:"right",render:e=>t.jsx(O.Text,{strong:!0,style:{color:"#52c41a"},children:$(e)})},{title:"状态",dataIndex:"status",key:"status",width:100,render:e=>t.jsx(L,{color:x.getStatusColor(e),children:x.getStatusText(e)})},{title:"第三方订单号",dataIndex:"thirdPartyOrderNo",key:"thirdPartyOrderNo",width:200,ellipsis:{showTitle:!1},render:e=>t.jsx(v,{placement:"topLeft",title:e,children:e||"-"})},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",width:180,render:e=>D(e),sorter:!0,sortOrder:h.orderBy==="created_at"&&!h.isAsc?"descend":"ascend"},{title:"操作",key:"action",width:100,fixed:"right",render:(e,l)=>t.jsx(f,{type:"link",size:"small",icon:t.jsx(M,{}),onClick:()=>r(`/withdrawal-requests/${l.id}`),children:"查看"})}];return t.jsx("div",{style:{padding:"24px"},children:t.jsxs(C,{children:[t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(ee,{level:4,children:"提现请求管理"}),t.jsxs(I,{children:[t.jsx(f,{icon:t.jsx(Z,{}),onClick:()=>E(!g),type:g?"primary":"default",children:"筛选"}),t.jsx(f,{icon:t.jsx(B,{}),onClick:()=>o(),loading:a,children:"刷新"})]})]}),g&&t.jsx(C,{size:"small",style:{marginTop:"16px",backgroundColor:"#fafafa"},children:t.jsxs(I,{wrap:!0,children:[t.jsx(m,{placeholder:"搜索请求编号",style:{width:200},onSearch:e=>u({requestId:e}),allowClear:!0}),t.jsx(m,{placeholder:"搜索用户ID",style:{width:200},onSearch:e=>u({userId:e}),allowClear:!0}),t.jsxs(z,{placeholder:"选择状态",style:{width:150},allowClear:!0,onChange:e=>u({status:e||void 0}),children:[t.jsx(c,{value:"PENDING",children:"待处理"}),t.jsx(c,{value:"APPROVED",children:"已批准"}),t.jsx(c,{value:"PROCESSING",children:"处理中"}),t.jsx(c,{value:"COMPLETED",children:"已完成"}),t.jsx(c,{value:"REJECTED",children:"已拒绝"}),t.jsx(c,{value:"FAILED",children:"失败"})]}),t.jsx(m,{placeholder:"搜索第三方订单号",style:{width:200},onSearch:e=>u({thirdPartyOrderNo:e}),allowClear:!0}),t.jsx(f,{icon:t.jsx(K,{}),onClick:H,children:"清除筛选"})]})})]}),t.jsx(V,{columns:F,dataSource:i,rowKey:"id",loading:a,pagination:{...d,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,l)=>`第 ${l[0]}-${l[1]} 条，共 ${e} 条`},onChange:k,scroll:{x:1200},size:"middle"})]})})};export{ne as default};
